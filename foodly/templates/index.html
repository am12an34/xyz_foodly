<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://kit.fontawesome.com/f13ace78b9.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Foodly | Home</title>
</head>

<body>
    <div class="sidenav">
        <a href="/resturants" >
            <img src="../static/images/foodly_logo.png" alt="" style="width: 70%; margin: 20px;">
        </a>
        <ul style="display: flex; flex-direction: column; padding-left: 0; width: 100%;">
            <li class="sidenav-items">
                <i class="fa-solid fa-bowl-food ico"></i>
                <a href="/resturants" style="margin-top: 9px;">Order Now</a>
            </li>
            <li class="sidenav-items">
                <i class="fa-solid fa-cart-shopping ico"></i>
                <a href="#">Your Orders</a>
            </li>
            <li class="sidenav-items">
                <i class="fa-solid fa-utensils ico"></i>
                <a href="#">Previous Orders</a>
            </li>
             <li class="sidenav-items">
                <i class="fa-solid fa-sign-out ico"></i>
                <a href="/logout">Logout</a>
            </li>
        </ul>
    </div>
    <div class="upper-navbar">
        <ul style="display: flex; justify-content: flex-end; margin: 5px 10px; list-style: none;">
            <li>
                <div class="dropdown">
                    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" style="width: 90px; box-shadow: none;"><img src="../static/images/profile-pic.png" alt="" class="profile-pic" style="width: 50%;"></button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                      <li><a class="dropdown-item" href="#">See Profile</a></li>
                      <li><a class="dropdown-item" href="/logout">Logout</a></li>
                    </ul>
                </div>
            </li>
            <li><i class="fa-regular fa-bell ico-black"></i></li>
        </ul>
       
        
    </div>
    <div class="content">
        <!-- {%block content%}
        {%endblock%} -->
        <h1 style="font-family: 'Poppins', sans-serif; margin: 25px;">Orders</h1>
        <div class="active-order">
            <div class="resturant-name-sec">
                <div class="res-info-active-order">
                    <img src="https://lh3.googleusercontent.com/p/AF1QipMidEEqczw-JoRCZt2kRZmkHrM6SrvGQe1OuCry=s1360-w1360-h1020" alt="" style="width: 10%; border-radius: 5px;">
                    <div style="margin: 5px 20px;">
                        <h3 style="font-family: 'Poppins', sans-serif;">John Resturant</h3>
                        <p style="font-family: 'Poppins', sans-serif;">NIT Agartala, Jirania</p>
                    </div>
                </div>
                <div style="margin: 10px 20px;">
                    <span class="badge bg-success" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Track</span>
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Order Status</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              Resturant is preparing your order
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn" data-bs-dismiss="modal" style="background-color: #ff633c; color: white;">Close</button>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="order-info">
                <div class="item-list">
                    <p>1 X Egg Roll</p>
                    <p>5 X Paratha</p>
                </div>
                <div class="item-price-list">
                    <p>&#8377; 35</p>
                    <p>&#8377; 50</p>
                </div>
            </div>
            <div class="item-total">
                <div class="item-list"><p>Total</p></div>
                <div class="item-price-list"><p>&#8377; 85</p></div>
            </div>
        </div>
    </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
        <script>
            const showDropdown = () => {
                const dropDown = document.getElementById("dropdown-contents");

                if (dropDown.style.display == "none") {
                    dropDown.style.display = "flex"
                } else {
                    dropDown.style.display = "none"
                }
            }

            const content = document.querySelector(".content");
            const menu = document.querySelector(".order-section");
            const stickyOffset = document.getElementById("rest-prof-img").offsetTop + document.getElementById("rest-prof-img").offsetHeight;

            const scrolltoItem = (section) => {
                const topPos = document.getElementById(section).offsetTop;
                content.scrollBy(0, topPos + 50);
            }


            const addOrReduce = (operation, event) => {
                const platesCountShow = event.target.parentNode.querySelector("#plates-count")
                var plates = parseInt(platesCountShow.innerHTML);
                if (operation == "+") {
                    plates = plates + 1;
                } else if (operation == "-" && plates > 0) {
                    plates = plates - 1;
                } else {
                    plates = 0;
                }

                platesCountShow.innerHTML = plates;
                console.log(plates)

            }

            const switchResInfo = (event) => {
                const overview = document.querySelector(".overview");
                const orderOnline = document.querySelector(".order-online");
                const review = document.querySelector(".review");

                if (event.target.id == "overview") {
                    overview.style.display = "block";
                    orderOnline.style.display = "none";
                    review.style.display = "none";
                } else if (event.target.id == "order-online") {
                    overview.style.display = "none";
                    orderOnline.style.display = "block";
                    review.style.display = "none";
                } else if (event.target.id == "review") {
                    overview.style.display = "none";
                    orderOnline.style.display = "none";
                    review.style.display = "block";
                }
            }

            
            // const items = document.getElementsByClassName("plates-count");
            const sendOrder = ()=>{
                var dataList = [];
                var data = {
                    item: "",
                    quantity: "",
                    price: 0
                }
                const items = document.getElementsByClassName("plates-count");
                for(let element of items){
                    let itemName = element.parentNode.parentNode.parentNode.getAttribute("name");
                    console.log(itemName)
                    let itemQuantity = element.innerHTML;
                    let itemPrice = parseInt(element.parentNode.parentNode.parentNode.querySelector(".item-info").querySelector(".item-price").innerHTML.split(" ")[1]);
                    if(itemQuantity!=0){
                        var new_data = {...data , ...{item: itemName, quantity: itemQuantity, price: itemPrice}}
                        dataList.push(new_data);
                    }
                }
                console.log(JSON.stringify(dataList));
            }

        </script>
</body>

</html>
